# [Lab 3](https://github.com/hanggrian/IIT-ITM515/blob/assets/assignments/hw3.pdf): Web Applications, Servlet and JSP

This project is a continuation of **Lab 1** regarding Payara community server
and **Lab 2** regarding Hibernate. While the previous work focused on rental
store management, this lab narrows down to film validation and registration.

- XML binding with [Jakarta Bind API](https://jakarta.ee/specifications/xml-binding/4.0/)
  and [GlassFish JAXB Runtime](https://javaee.github.io/jaxb-v2/).
- Use Hibernate with *Jakarta Persistence API (JPA)*, managing connection with
  `persistence.xml`.
- Capture POST requests with simple servlets.

## Discussion

> Your understanding of the difference between the forward and redirect
  operations.

**Forwarding** refers to the process of sending a request from one servlet to
another, it is a communication within the server without notifying the client.
**Redirecting**, on the other hand, sends a response back to the client,
prompting the client to make a new request.

> How would you be validating user submissions without the Bean Validation API
  standard?

Without the Bean Validation API, we could enforce validation with manual checks
in the servlet controller layer.

```java
String title = request.getParameter("title");
if (title.isEmpty() || title.length() > 128) {
    // handle error
}
```

Additionally, we can also protects control input from unwanted values using
JavaScript on the client side.

```js
titleText.addEventListener("input", function() {
    if (this.value.length > 128) {
        // handle error
    }
});
```

> How do you think this approach would scale to a real application with 100's of
  entities?

The manual approach would become repetitive in a large-scale application with
full database schema. Validation API provides a standardized solution to assert
entity constraints, despite the initial overhead of learning and implementing
the framework.

> Why didn't we need to include any additional dependencies (i.e. Bean
  Validation, JDBC) in this project?

In my understanding, Jakarta Bean Validation API is included in the
[Hibernate Validator](https://hibernate.org/validator/) library. The JDBC,
however, is required to initialize `persistence.xml` and connect to the
database.

## Building

To run the project, the MySQL community server must be running and *Sakila*
sample database is imported. Run the following command to deploy the web
application:

```sh
# initial build
./gradlew cargoRunLocal

# subsequent builds
./gradlew cargoRedeployLocal
```

## Diagram

<img width="240" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/diagram1.svg"><br><small>Diagram 1 &mdash; Sakila UML diagram</small>

## Screenshots

### Interface

<img width="480" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot1_1.png"><br><small>Screenshot 1.1 &mdash; Main interface</small>

<img width="640" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot1_2.png"><br><small>Screenshot 1.2 &mdash; Expanded state</small>

### Input Validation

<img width="320" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot2_1.png"><br><small>Screenshot 2.1 &mdash; Text validation</small>

Title text must be provided and less than 129 characters, per the Sakila
database schema requirements. The description can be empty, but if provided, the
text must be less than 256 characters.

<img width="320" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot2_2.png"><br><small>Screenshot 2.2 &mdash; Number validation</small>

The rental rate, length and replacement cost cannot be zero or negative. The
rental rate cannot be longer than 4 digits while the length of replacement cost
must be longer than 5 digits.

<img width="320" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot2_3.png"><br><small>Screenshot 2.3 &mdash; Selection validation</small>

The language dropdown and a button from rating radio group must be selected.

### Sending Data

<img width="320" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot3_1.png"><br><small>Screenshot 3.1 &mdash; Invalid properties</small>

While the website application restricts user input by control, the server-side
validation is also performed to ensure data integrity. In this example, the
program displays each error collected by Hibernate Validator.

<img width="320" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot3_2.png"><br><small>Screenshot 3.2 &mdash; Inserting entry</small>

If the validation is successful, the application will insert the new film entry
using DAO pattern. The film ID is auto-generated by the database and will be
returned to the user.

<img width="480" src="https://github.com/hanggrian/IIT-ITM515/raw/assets/assignments/hw3/screenshot3_3.png"><br><small>Screenshot 3.3 &mdash; Successful insert</small>

Here is the proof of successful insertion of a new film entry into the Sakila
database.
